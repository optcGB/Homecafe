<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì£¼ë°© ì£¼ë¬¸ ê´€ë¦¬ (Kitchen Manager)</title>
    <style>
        body { font-family: 'Apple SD Gothic Neo', sans-serif; margin: 0; padding: 0; background-color: #222; color: white; }
        
        /* ìƒë‹¨ í—¤ë” */
        .header { background-color: #333; padding: 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #ffaa00; }
        .title { font-size: 24px; font-weight: bold; }
        .status { font-size: 14px; color: #aaa; }
        
        /* ì£¼ë¬¸ ëª©ë¡ ì˜ì—­ */
        .order-container { padding: 20px; display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; }
        
        /* ì£¼ë¬¸ í‹°ì¼“ ë””ìì¸ */
        .order-ticket { background-color: #fff; color: #333; border-radius: 10px; overflow: hidden; animation: slideIn 0.3s ease; }
        .ticket-header { background-color: #ffaa00; padding: 10px 15px; font-weight: bold; display: flex; justify-content: space-between; }
        .ticket-time { font-size: 0.8em; opacity: 0.8; }
        
        .ticket-body { padding: 15px; min-height: 100px; }
        .menu-row { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 1.1em; border-bottom: 1px dashed #ddd; padding-bottom: 5px; }
        
        .ticket-footer { padding: 10px; text-align: center; background-color: #eee; }
        .btn-done { background-color: #222; color: white; border: none; padding: 10px 30px; border-radius: 5px; cursor: pointer; font-size: 1em; width: 100%; font-weight: bold; }
        .btn-done:hover { background-color: #000; }

        .empty-msg { grid-column: 1 / -1; text-align: center; margin-top: 100px; color: #555; font-size: 1.5em; }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>

    <div class="header">
        <div class="title">ğŸ”¥ ì£¼ë°© ì£¼ë¬¸ í˜„í™©íŒ</div>
        <div class="status">ì‹¤ì‹œê°„ ëŒ€ê¸°ì¤‘... <span id="clock">00:00:00</span></div>
    </div>

    <div class="order-container" id="order-board">
        <div class="empty-msg">í˜„ì¬ ëŒ€ê¸° ì¤‘ì¸ ì£¼ë¬¸ì´ ì—†ìŠµë‹ˆë‹¤.</div>
    </div>

    <script>
        // ì‹œê³„ ê¸°ëŠ¥
        setInterval(() => {
            const now = new Date();
            document.getElementById('clock').innerText = now.toLocaleTimeString();
        }, 1000);

        // 3ì´ˆë§ˆë‹¤ ìƒˆë¡œìš´ ì£¼ë¬¸ì´ ìˆëŠ”ì§€ í™•ì¸ (í´ë§ ë°©ì‹)
        setInterval(checkNewOrders, 3000);

        function checkNewOrders() {
            // ë¡œì»¬ ì €ì¥ì†Œì—ì„œ 'orders' ë°ì´í„°ë¥¼ ê°€ì ¸ì˜´
            const storedOrders = localStorage.getItem('cafe_orders');
            
            if (storedOrders) {
                const orders = JSON.parse(storedOrders);
                renderOrders(orders);
            } else {
                renderOrders([]);
            }
        }

        function renderOrders(orders) {
            const board = document.getElementById('order-board');
            
            if (orders.length === 0) {
                board.innerHTML = '<div class="empty-msg">í˜„ì¬ ëŒ€ê¸° ì¤‘ì¸ ì£¼ë¬¸ì´ ì—†ìŠµë‹ˆë‹¤.</div>';
                return;
            }

            board.innerHTML = ''; // ì´ˆê¸°í™”

            orders.forEach((order, index) => {
                let menuHtml = '';
                order.items.forEach(item => {
                    menuHtml += `
                        <div class="menu-row">
                            <span>${item.name}</span>
                            <span>${item.count}</span>
                        </div>
                    `;
                });

                const ticket = document.createElement('div');
                ticket.className = 'order-ticket';
                ticket.innerHTML = `
                    <div class="ticket-header">
                        <span>ì£¼ë¬¸ #${index + 1}</span>
                        <span class="ticket-time">${order.time}</span>
                    </div>
                    <div class="ticket-body">
                        ${menuHtml}
                    </div>
                    <div class="ticket-footer">
                        <div style="margin-bottom:5px; font-weight:bold;">ì´ ${order.totalPrice.toLocaleString()}ì›</div>
                        <button class="btn-done" onclick="completeOrder(${index})">ì¡°ë¦¬ ì™„ë£Œ</button>
                    </div>
                `;
                board.appendChild(ticket);
            });
        }

        // 'ì¡°ë¦¬ ì™„ë£Œ' ë²„íŠ¼ ëˆ„ë¥´ë©´ ì‚­ì œ
        function completeOrder(index) {
            const storedOrders = localStorage.getItem('cafe_orders');
            if (storedOrders) {
                let orders = JSON.parse(storedOrders);
                orders.splice(index, 1); // í•´ë‹¹ ì£¼ë¬¸ ì‚­ì œ
                localStorage.setItem('cafe_orders', JSON.stringify(orders)); // ì €ì¥ì†Œ ì—…ë°ì´íŠ¸
                renderOrders(orders); // í™”ë©´ ê°±ì‹ 
            }
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì¦‰ì‹œ í™•ì¸
        checkNewOrders();
    </script>
</body>
</html>